{% extends "base.html" %}

{% block title %}{% if course %}Edit{% else %}Create{% endif %} Course | TOTC{% endblock %}

{% block content %}
    <section class="section section--soft">
        <div class="container">
            <div class="center" style="margin-bottom: 48px;">
                <h2 class="h2">{% if course %}Edit{% else %}Create New{% endif %} <span class="accent">Course</span></h2>
                <p class="muted">Define a new course for the platform.</p>
            </div>

            <div style="max-width: 800px; margin: 0 auto;">
                <form method="post" class="card" style="background: #fff; padding: 30px; border-radius: 20px; box-shadow: var(--shadow);">
                    {% csrf_token %}

                    <div style="margin-bottom: 16px;">
                        <label class="small" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem;">Course Name</label>
                        <input type="text" name="name" value="{{ course.name|default:'' }}" required placeholder="e.g. Python for Beginners"
                               style="width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem;">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                        <div>
                            <label class="small" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem;">Category</label>
                            <select name="category" required style="width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem;">
                                <option value="">-- Select Category --</option>
                                {% for category in categories %}
                                    <option value="{{ category.id }}" {% if course.category_id == category.id or selected_category_id|stringformat:"d" == category.id|stringformat:"d" %}selected{% endif %}>{{ category.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div>
                            <label class="small" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem;">Price ($)</label>
                            <input type="number" name="price" value="{{ course.price|default:'' }}" placeholder="e.g. 99"
                                   style="width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem;">
                        </div>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label class="small" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem;">Short Description</label>
                        <input type="text" name="small_description" value="{{ course.small_description|default:'' }}" required placeholder="Brief overview of the course"
                               style="width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem;">
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label class="small" style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 0.85rem;">Full Description</label>
                        <textarea name="large_description" rows="6" required placeholder="Detailed course curriculum and outcomes..."
                                  style="width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 0.95rem; resize: vertical;">{{ course.large_description|default:'' }}</textarea>
                    </div>

                    <div style="display: flex; gap: 12px;">
                        <button type="submit" class="btn btn--pill btn--primary" style="flex: 1; padding: 10px;">{% if course %}Update{% else %}Create{% endif %} Course</button>
                        <a href="{% url 'courses:admin_dashboard' %}" class="btn btn--pill btn--white" style="flex: 1; border: 1px solid #ddd; padding: 10px;">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </section>
{% endblock %}
