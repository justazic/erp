{% extends "base.html" %}
{% load static %}
{% block title %}Courses{% endblock %}

{% block content %}
    <section class="courseListPage">
        <div class="container">

            <!-- PAGE HEADER -->
            <div class="pageHeader">
                <h1>Our Courses</h1>
                <p class="muted">
                    Choose a course and explore available sessions
                </p>
            </div>

            <!-- OPTIONAL CATEGORY FILTER (STATIC UI) -->
            {% if categories %}
                <div class="categoryFilter">
                    <a href="{% url 'courses:list' %}" class="pill active">All</a>
                    {% for cat in categories %}
                        <a href="?category={{ cat.id }}" class="pill">
                            {{ cat.name }}
                        </a>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- COURSE GRID -->
            <div class="courseGrid">

                {% for course in courses %}
                    <article class="courseCard">

                        <!-- IMAGE -->
                        <div class="courseCard__image">
                            {% if course.small_image %}
                                <img src="{{ course.small_image.url }}" alt="{{ course.name }}">
                            {% else %}
                                <img src="{% static 'images/course-placeholder.png' %}" alt="">
                            {% endif %}
                        </div>

                        <!-- BODY -->
                        <div class="courseCard__body">
                            <div class="courseCard__top">
                                {% if course.category %}
                                    <span class="badge">{{ course.category.name }}</span>
                                {% endif %}
                                <h3 class="courseTitle">{{ course.name }}</h3>
                            </div>

                            <p class="courseDesc">
                                {{ course.small_description }}
                            </p>

                            <!-- META -->
                            <div class="courseMeta">
                                {% if course.price %}
                                    <div class="price">$ {{ course.price }}</div>
                                {% else %}
                                    <div class="price muted">Free</div>
                                {% endif %}

                                <div class="sessionsCount">
                                    {{ course.sessions.count }} sessions
                                </div>
                            </div>

                            <!-- ACTION -->
                            <a href="{% url 'courses:detail' course.id %}"
                               class="btn btn--pill btn--primary btn--block">
                                View course
                            </a>
                        </div>

                    </article>
                {% empty %}
                    <p class="muted">No courses available.</p>
                {% endfor %}

            </div>

        </div>
    </section>
{% endblock %}
